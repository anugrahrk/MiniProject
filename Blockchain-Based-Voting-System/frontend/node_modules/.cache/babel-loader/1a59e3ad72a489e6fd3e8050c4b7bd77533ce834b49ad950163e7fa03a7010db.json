{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\anugr\\\\Documents\\\\Project\\\\Mini Project\\\\Blockchain-Based-Voting-System\\\\frontend\\\\src\\\\pages\\\\User\\\\Polls.tsx\",\n  _s = $RefreshSig$();\nimport React, { useContext, useEffect, useState } from \"react\";\nimport axios from \"../../axios\";\nimport Chart from \"../../components/Polls/Chart\";\nimport Finished from \"../../components/Polls/Finished\";\nimport Panel from \"../../components/Polls/Panel\";\nimport Running from \"../../components/Polls/Running\";\nimport Waiting from \"../../components/Waiting\";\nimport { AuthContext } from \"../../contexts/Auth\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst User = () => {\n  _s();\n  const [voteState, setVoteStatus] = useState(\"checking\");\n  const [loading, setLoading] = useState(true);\n  const [data, setData] = useState({\n    name: \"\",\n    description: \"\",\n    votes: {}\n  });\n  const [votable, setVotable] = useState(\"\");\n  const authContext = useContext(AuthContext);\n  useEffect(() => {\n    console.log(\"called here ?\");\n    axios.get(\"/polls/status\").then(res => {\n      setVoteStatus(res.data.status);\n      setLoading(false);\n    }).catch(error => console.log({\n      error\n    }));\n  }, []);\n  useEffect(() => {\n    if (voteState !== \"checking\") {\n      axios.get(\"/polls/\").then(res => {\n        setData(res.data);\n        console.log(res);\n        setLoading(false);\n      });\n      axios.post(\"/polls/check-voteability\", {\n        id: authContext.id.toString()\n      }).then(res => {\n        setVotable(res.data);\n      }).catch(err => console.log(err));\n    }\n  });\n  if (loading || voteState === \"checking\") return /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 51,\n    columnNumber: 51\n  }, this);\n  if (voteState === \"not-started\") return /*#__PURE__*/_jsxDEV(Waiting, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 53,\n    columnNumber: 43\n  }, this);\n  return /*#__PURE__*/_jsxDEV(Panel, {\n    name: data.name,\n    description: data.description,\n    children: /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [voteState === \"running\" ? /*#__PURE__*/_jsxDEV(Running, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 36\n      }, this) : /*#__PURE__*/_jsxDEV(Finished, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 50\n      }, this), /*#__PURE__*/_jsxDEV(Chart, {\n        enableVote: votable === \"not-voted\",\n        userId: authContext.id,\n        userName: authContext.name,\n        votes: data.votes\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 56,\n    columnNumber: 5\n  }, this);\n};\n_s(User, \"I3Yv5C5ZNmn+uYg0sMcN6x/5qv4=\");\n_c = User;\nexport default User;\nvar _c;\n$RefreshReg$(_c, \"User\");","map":{"version":3,"names":["React","useContext","useEffect","useState","axios","Chart","Finished","Panel","Running","Waiting","AuthContext","jsxDEV","_jsxDEV","Fragment","_Fragment","User","_s","voteState","setVoteStatus","loading","setLoading","data","setData","name","description","votes","votable","setVotable","authContext","console","log","get","then","res","status","catch","error","post","id","toString","err","fileName","_jsxFileName","lineNumber","columnNumber","children","enableVote","userId","userName","_c","$RefreshReg$"],"sources":["C:/Users/anugr/Documents/Project/Mini Project/Blockchain-Based-Voting-System/frontend/src/pages/User/Polls.tsx"],"sourcesContent":["import React, { useContext, useEffect, useState } from \"react\";\r\nimport axios from \"../../axios\";\r\nimport Chart from \"../../components/Polls/Chart\";\r\nimport Finished from \"../../components/Polls/Finished\";\r\nimport Panel from \"../../components/Polls/Panel\";\r\nimport Running from \"../../components/Polls/Running\";\r\nimport Waiting from \"../../components/Waiting\";\r\nimport { AuthContext } from \"../../contexts/Auth\";\r\n\r\nconst User = () => {\r\n  const [voteState, setVoteStatus] = useState<\r\n    \"finished\" | \"running\" | \"not-started\" | \"checking\"\r\n  >(\"checking\");\r\n  const [loading, setLoading] = useState(true);\r\n  const [data, setData] = useState({ name: \"\", description: \"\", votes: {} });\r\n  const [votable, setVotable] = useState(\"\");\r\n\r\n  const authContext = useContext(AuthContext);\r\n\r\n  useEffect(() => {\r\n    console.log(\"called here ?\");\r\n\r\n    axios\r\n      .get(\"/polls/status\")\r\n      .then((res) => {\r\n        setVoteStatus(res.data.status);\r\n        setLoading(false);\r\n      })\r\n      .catch((error) => console.log({ error }));\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (voteState !== \"checking\") {\r\n      axios.get(\"/polls/\").then((res) => {\r\n        setData(res.data);\r\n        console.log(res);\r\n        setLoading(false);\r\n      });\r\n\r\n      axios\r\n        .post(\"/polls/check-voteability\", {\r\n          id: authContext.id.toString(),\r\n        })\r\n        .then((res) => {\r\n          setVotable(res.data);\r\n        })\r\n        .catch((err) => console.log(err));\r\n    }\r\n  });\r\n\r\n  if (loading || voteState === \"checking\") return <div></div>;\r\n\r\n  if (voteState === \"not-started\") return <Waiting />;\r\n\r\n  return (\r\n    <Panel name={data.name} description={data.description}>\r\n      <>\r\n        {voteState === \"running\" ? <Running /> : <Finished />}\r\n\r\n        <Chart\r\n          enableVote={votable === \"not-voted\"}\r\n          userId={authContext.id}\r\n          userName={authContext.name}\r\n          votes={data.votes}\r\n        />\r\n      </>\r\n    </Panel>\r\n  );\r\n};\r\n\r\nexport default User;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}